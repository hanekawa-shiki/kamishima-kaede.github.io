import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o,c as r,e as d,b as e,d as a,a as s,f as t}from"./app-DAP5m6vZ.js";const p="/assets/ssl-CdI8-Ysy.png",m={},h=e("p",null,[a("本教程记录的是通过使用"),e("code",null,"acme.sh"),a("申请"),e("code",null,"Let's Encrypt"),a("泛域名证书,安装证书及"),e("code",null,"nginx"),a("配置使用证书,并通过配置实现"),e("code",null,"ssl"),a("证书自动续期")],-1),u=e("h2",{id:"环境",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#环境"},[e("span",null,"环境")])],-1),g=e("p",null,[a("测试环境: "),e("code",null,"Ubuntu 20.04"),a("、"),e("code",null,"nginx")],-1),b=e("p",null,"使用到的工具:",-1),v={href:"https://github.com/acmesh-official/acme.sh",target:"_blank",rel:"noopener noreferrer"},k=e("h2",{id:"acme-sh安装",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#acme-sh安装"},[e("span",null,[e("code",null,"acme.sh"),a("安装")])])],-1),_={href:"https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"},f=t(`<p>安装:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> https://get.acme.sh <span class="token operator">|</span> <span class="token function">sh</span> <span class="token parameter variable">-s</span> <span class="token assign-left variable">email</span><span class="token operator">=</span>my@example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>默认安装到当前用户的<code>home</code>目录下<code>~/.acme.sh/</code></p><p>建议创建一个<code>shell</code>的<code>alias</code>, 例如编辑<code>.bashrc</code>并在底部添加，方便你的使用:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">acme.sh</span><span class="token operator">=~</span>/.acme.sh/acme.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>保存后<code>source ~/.bashrc</code>一下</p>`,6),x={href:"https://github.com/Neilpang/acme.sh/wiki/How-to-install",target:"_blank",rel:"noopener noreferrer"},y=t('<h2 id="使用dns-api自动申请证书" tabindex="-1"><a class="header-anchor" href="#使用dns-api自动申请证书"><span>使用<code>DNS api</code>自动申请证书</span></a></h2><p>首先申请对应<code>DNS</code>供应商的<code>DNS API KEY</code>,以下使用<code>namesilo</code>做演示,其他<code>DNS</code>供应商请自行搜索</p>',2),N={href:"https://www.namesilo.com/account/api-manager",target:"_blank",rel:"noopener noreferrer"},S=e("code",null,"namesilo",-1),w=t('<figure><img src="'+p+`" alt="申请namesilo dns api key" tabindex="0" loading="lazy"><figcaption>申请namesilo dns api key</figcaption></figure><p>添加变量:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">Namesilo_Key</span><span class="token operator">=</span><span class="token string">&quot;xxxxxx&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),E=e("code",null,"DNS",-1),L={href:"https://github.com/acmesh-official/acme.sh/wiki/dnsapi",target:"_blank",rel:"noopener noreferrer"},q=t(`<p>生成证书:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>acme.sh <span class="token parameter variable">--issue</span> <span class="token parameter variable">--dns</span> dns_namesilo <span class="token parameter variable">--dnssleep</span> <span class="token number">900</span> <span class="token parameter variable">-d</span> example.com <span class="token parameter variable">-d</span> www.example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>建议将900改大为1800,因为<code>namesilo</code>解析比较慢</p><h2 id="安装证书" tabindex="-1"><a class="header-anchor" href="#安装证书"><span>安装证书</span></a></h2><p><code>nginx</code>使用以下方式:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>acme.sh --install-cert <span class="token parameter variable">-d</span> example.com <span class="token punctuation">\\</span>
--key-file       /path/to/keyfile/in/nginx/key.pem  <span class="token punctuation">\\</span>
--fullchain-file /path/to/fullchain/nginx/cert.pem <span class="token punctuation">\\</span>
<span class="token parameter variable">--reloadcmd</span>     <span class="token string">&quot;service nginx force-reload&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),T={href:"https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E#3-copy%E5%AE%89%E8%A3%85-%E8%AF%81%E4%B9%A6",target:"_blank",rel:"noopener noreferrer"},A=t(`<p>如果报错需要安装<code>ecc</code>证书，用如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>acme.sh --install-cert <span class="token parameter variable">--ecc</span> <span class="token parameter variable">-d</span> example.com <span class="token punctuation">\\</span>
--key-file       /path/to/keyfile/in/nginx/key.pem  <span class="token punctuation">\\</span>
--fullchain-file /path/to/fullchain/nginx/cert.pem <span class="token punctuation">\\</span>
<span class="token parameter variable">--reloadcmd</span>     <span class="token string">&quot;service nginx force-reload&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自动更新证书" tabindex="-1"><a class="header-anchor" href="#自动更新证书"><span>自动更新证书</span></a></h2><p><code>acme.sh</code>安装的时候会自动添加定时任务,确保你的机器上<code>crontab</code>正确安装,可以通过<code>crontab -l</code>命令参看定时任务</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">crontab</span>  <span class="token parameter variable">-l</span>

<span class="token number">24</span> * * * * <span class="token string">&quot;/root/.acme.sh&quot;</span>/acme.sh <span class="token parameter variable">--cron</span> <span class="token parameter variable">--home</span> <span class="token string">&quot;/root/.acme.sh&quot;</span> <span class="token operator">&gt;</span> /dev/null
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="更新acme-sh" tabindex="-1"><a class="header-anchor" href="#更新acme-sh"><span>更新<code>acme.sh</code></span></a></h2><p>目前由于<code>acme</code>协议和<code>letsencrypt CA</code>都在频繁的更新, 因此<code>acme.sh</code>也经常更新以保持同步.</p><p>升级<code>acme.sh</code>到最新版 :</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>acme.sh <span class="token parameter variable">--upgrade</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果你不想手动升级, 可以开启自动升级:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>acme.sh <span class="token parameter variable">--upgrade</span> --auto-upgrade
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>之后,<code>acme.sh</code>就会自动保持更新了.</p><p>你也可以随时关闭自动更新:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>acme.sh <span class="token parameter variable">--upgrade</span> --auto-upgrade  <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,14);function B(D,C){const n=i("ExternalLinkIcon"),c=i("Badge");return o(),r("div",null,[h,d(" more "),u,g,b,e("ul",null,[e("li",null,[e("a",v,[a("acme.sh"),s(n)])])]),k,e("p",null,[a("参考"),e("a",_,[a("官方中文文档"),s(n)])]),f,e("p",null,[a("其他安装方法: "),e("a",x,[a("https://github.com/Neilpang/acme.sh/wiki/How-to-install"),s(n)])]),y,e("p",null,[e("a",N,[a("namesilo申请地址"),s(n)])]),s(c,{text:"注意",type:"warning"}),a("由于"),S,a("网站更新过,网上其他教程的地址还是老地址,老地址配置是不生效的!"),w,e("p",null,[a("其他"),E,a("供应商的key添加变量方法:"),e("a",L,[a("https://github.com/acmesh-official/acme.sh/wiki/dnsapi"),s(n)])]),q,e("p",null,[a("其他方式"),e("a",T,[a("参考文档"),s(n)])]),A])}const z=l(m,[["render",B],["__file","domainNameSSL.html.vue"]]),I=JSON.parse(`{"path":"/website_build/domainNameSSL.html","title":"免费泛域名证书申请安装及配置","lang":"zh-CN","frontmatter":{"title":"免费泛域名证书申请安装及配置","icon":"linux","category":"域名","tag":["SSL","Let's Encrypt","namesilo"],"isOriginal":true,"date":"2022-11-18T00:00:00.000Z","description":"本教程记录的是通过使用acme.sh申请Let's Encrypt泛域名证书,安装证书及nginx配置使用证书,并通过配置实现ssl证书自动续期 环境 测试环境: Ubuntu 20.04、nginx 使用到的工具: acme.sh acme.sh安装 参考官方中文文档 安装: 默认安装到当前用户的home目录下~/.acme.sh/ 建议创建一个sh...","head":[["meta",{"property":"og:url","content":"https://hanekawa.top/website_build/domainNameSSL.html"}],["meta",{"property":"og:site_name","content":"Kamishima-kaede"}],["meta",{"property":"og:title","content":"免费泛域名证书申请安装及配置"}],["meta",{"property":"og:description","content":"本教程记录的是通过使用acme.sh申请Let's Encrypt泛域名证书,安装证书及nginx配置使用证书,并通过配置实现ssl证书自动续期 环境 测试环境: Ubuntu 20.04、nginx 使用到的工具: acme.sh acme.sh安装 参考官方中文文档 安装: 默认安装到当前用户的home目录下~/.acme.sh/ 建议创建一个sh..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-21T07:34:25.000Z"}],["meta",{"property":"article:author","content":"kamishima-kaede"}],["meta",{"property":"article:tag","content":"SSL"}],["meta",{"property":"article:tag","content":"Let's Encrypt"}],["meta",{"property":"article:tag","content":"namesilo"}],["meta",{"property":"article:published_time","content":"2022-11-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-21T07:34:25.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"免费泛域名证书申请安装及配置\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-11-18T00:00:00.000Z\\",\\"dateModified\\":\\"2024-02-21T07:34:25.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"kamishima-kaede\\",\\"url\\":\\"https://hanekawa.top\\"}]}"]]},"headers":[{"level":2,"title":"环境","slug":"环境","link":"#环境","children":[]},{"level":2,"title":"acme.sh安装","slug":"acme-sh安装","link":"#acme-sh安装","children":[]},{"level":2,"title":"使用DNS api自动申请证书","slug":"使用dns-api自动申请证书","link":"#使用dns-api自动申请证书","children":[]},{"level":2,"title":"安装证书","slug":"安装证书","link":"#安装证书","children":[]},{"level":2,"title":"自动更新证书","slug":"自动更新证书","link":"#自动更新证书","children":[]},{"level":2,"title":"更新acme.sh","slug":"更新acme-sh","link":"#更新acme-sh","children":[]}],"git":{"createdTime":1668764177000,"updatedTime":1708500865000,"contributors":[{"name":"kamishima-kaede","email":"kamiacgxu@gmail.com","commits":1},{"name":"shiki","email":"kamiacgxu@gmail.com","commits":1},{"name":"shiki ryougi","email":"shikiryougi@shikideMacBook.local","commits":1}]},"readingTime":{"minutes":2,"words":599},"filePathRelative":"website_build/domainNameSSL.md","localizedDate":"2022年11月18日","excerpt":"<p>本教程记录的是通过使用<code>acme.sh</code>申请<code>Let's Encrypt</code>泛域名证书,安装证书及<code>nginx</code>配置使用证书,并通过配置实现<code>ssl</code>证书自动续期</p>\\n","autoDesc":true}`);export{z as comp,I as data};
