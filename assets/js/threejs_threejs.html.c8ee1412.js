"use strict";(self.webpackChunkvuepress_theme_hope_template=self.webpackChunkvuepress_theme_hope_template||[]).push([[4157],{1417:(s,n,a)=>{a.r(n),a.d(n,{comp:()=>c,data:()=>t});var l=a(9034);const p=(0,l.Lk)("p",null,[(0,l.Lk)("code",null,"three.js"),(0,l.eW)("学习笔记。")],-1),o=(0,l.Fv)('<h2 id="核心概念" tabindex="-1"><a class="header-anchor" href="#核心概念"><span>核心概念</span></a></h2><p>sceen（场景）：场景是一个容器，用于保存、跟踪说要渲染的物体和使用的光源。</p><p>camera（摄像机）：摄像机决定了能够在场景看到什么。</p><p>renderer（渲染器）：会基于摄像机的角度来计算场景对象在浏览器中会渲染成什么样子。</p><p>简单示例：</p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">&lt;!DOCTYPE</span><span style="color:#8FBCBB;"> html</span><span style="color:#81A1C1;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">&lt;html&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">&lt;head&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;title&gt;</span><span style="color:#D8DEE9FF;">Example 02.01 - Basic Scene</span><span style="color:#81A1C1;">&lt;/title&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;script</span><span style="color:#8FBCBB;"> type</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/javascript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> charset</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">UTF-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">../../libs/three/three.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;&lt;/script&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;script</span><span style="color:#8FBCBB;"> type</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/javascript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> charset</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">UTF-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">../../libs/three/controls/TrackballControls.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;&lt;/script&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;script</span><span style="color:#8FBCBB;"> type</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/javascript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">../../libs/util/Stats.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;&lt;/script&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;script</span><span style="color:#8FBCBB;"> type</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/javascript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">../../libs/util/dat.gui.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;&lt;/script&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;script</span><span style="color:#8FBCBB;"> type</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/javascript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">../js/util.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;&lt;/script&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;script</span><span style="color:#8FBCBB;"> type</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/javascript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">./js/02-01.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;&lt;/script&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;link</span><span style="color:#8FBCBB;"> rel</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">stylesheet</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#8FBCBB;"> href</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">../../css/default.css</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">&lt;/head&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">&lt;body&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;div</span><span style="color:#8FBCBB;"> id</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">webgl-output</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;&lt;/div&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;script</span><span style="color:#8FBCBB;"> type</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/javascript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>\n<span class="line"><span style="color:#D8DEE9FF;">        (</span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {</span></span>\n<span class="line"><span style="color:#616E88;">            // your page initialization code here</span></span>\n<span class="line"><span style="color:#616E88;">            // the DOM will be available here</span></span>\n<span class="line"><span style="color:#88C0D0;">            init</span><span style="color:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="color:#ECEFF4;">        }</span><span style="color:#D8DEE9FF;">)()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">    &lt;/script&gt;</span></span>\n<span class="line"><span style="color:#81A1C1;">&lt;/body&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">&lt;/html&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> init</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>\n<span class="line"><span style="color:#616E88;">    // 左上角帧率显示工具</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> stats</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> initStats</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // create a scene, that will hold all our elements such as objects, cameras and lights.</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> scene</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Scene</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // create a camera, which defines where we&#39;re looking at.</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> camera</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">PerspectiveCamera</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">45</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> window</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">innerWidth</span><span style="color:#81A1C1;"> /</span><span style="color:#D8DEE9;"> window</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">innerHeight</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0.1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 100</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // create a render and set the size</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> renderer</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">WebGLRenderer</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D8DEE9;">    renderer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">setClearColor</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Color</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0x000000</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    renderer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">setSize</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">window</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">innerWidth</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> window</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">innerHeight</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    renderer</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">shadowMap</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">enabled</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> true;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // create the ground plane</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> planeGeometry</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">PlaneGeometry</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">60</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 40</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> planeMaterial</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">MeshLambertMaterial</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>\n<span class="line"><span style="color:#88C0D0;">        color</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 0xffffff</span></span>\n<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> plane</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Mesh</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">planeGeometry</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> planeMaterial</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    plane</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">receiveShadow</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> true;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // rotate and position the plane</span></span>\n<span class="line"><span style="color:#D8DEE9;">    plane</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">rotation</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">x</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">0.5</span><span style="color:#81A1C1;"> *</span><span style="color:#D8DEE9;"> Math</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">PI</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    plane</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">x</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    plane</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">y</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    plane</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">z</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // add the plane to the scene</span></span>\n<span class="line"><span style="color:#D8DEE9;">    scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">plane</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // position and point the camera to the center of the scene</span></span>\n<span class="line"><span style="color:#D8DEE9;">    camera</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">x</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">30</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    camera</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">y</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 40</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    camera</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">z</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 30</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    camera</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">lookAt</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">scene</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // add subtle ambient lighting</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> ambientLight</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">AmbientLight</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0x3c3c3c</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">ambientLight</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // add spotlight for the shadows</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> spotLight</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">SpotLight</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0xffffff</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1.2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 150</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 120</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    spotLight</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">-</span><span style="color:#B48EAD;">40</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 60</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    spotLight</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">castShadow</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> true;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">spotLight</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // add the output of the renderer to the html element</span></span>\n<span class="line"><span style="color:#D8DEE9;">    document</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getElementById</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">webgl-output</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">appendChild</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">renderer</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">domElement</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // call the render function</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> step</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> controls</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#81A1C1;"> function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {</span></span>\n<span class="line"><span style="color:#81A1C1;">        this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">rotationSpeed</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0.02</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">        this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">numberOfObjects</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> scene</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">children</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">        this</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">removeCube</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {</span></span>\n<span class="line"><span style="color:#81A1C1;">            const</span><span style="color:#D8DEE9;"> allChildren</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> scene</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">children</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">            const</span><span style="color:#D8DEE9;"> lastObject</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> allChildren</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">allChildren</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length </span><span style="color:#81A1C1;">-</span><span style="color:#B48EAD;"> 1</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">            if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">lastObject</span><span style="color:#81A1C1;"> instanceof</span><span style="color:#D8DEE9FF;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">Mesh) </span><span style="color:#ECEFF4;">{</span></span>\n<span class="line"><span style="color:#D8DEE9;">                scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">remove</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">lastObject</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">                this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">numberOfObjects</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> scene</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">children</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#ECEFF4;">            }</span></span>\n<span class="line"><span style="color:#ECEFF4;">        }</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">        this</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">addCube</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">            const</span><span style="color:#D8DEE9;"> cubeSize</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">ceil</span><span style="color:#D8DEE9FF;">((</span><span style="color:#D8DEE9;">Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">random</span><span style="color:#D8DEE9FF;">() </span><span style="color:#81A1C1;">*</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">            const</span><span style="color:#D8DEE9;"> cubeGeometry</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">BoxGeometry</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">cubeSize</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> cubeSize</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> cubeSize</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">            const</span><span style="color:#D8DEE9;"> cubeMaterial</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">MeshLambertMaterial</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>\n<span class="line"><span style="color:#88C0D0;">                color</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">random</span><span style="color:#D8DEE9FF;">() </span><span style="color:#81A1C1;">*</span><span style="color:#B48EAD;"> 0xffffff</span></span>\n<span class="line"><span style="color:#ECEFF4;">            }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">            const</span><span style="color:#D8DEE9;"> cube</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Mesh</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">cubeGeometry</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> cubeMaterial</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">            cube</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">castShadow</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> true;</span></span>\n<span class="line"><span style="color:#D8DEE9;">            cube</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">cube-</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> scene</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">children</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">            // position the cube randomly in the scene</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D8DEE9;">            cube</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">x</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">30</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">round</span><span style="color:#D8DEE9FF;">((</span><span style="color:#D8DEE9;">Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">random</span><span style="color:#D8DEE9FF;">() </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9;"> planeGeometry</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">parameters</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">width</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">            cube</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">y</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">round</span><span style="color:#D8DEE9FF;">((</span><span style="color:#D8DEE9;">Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">random</span><span style="color:#D8DEE9FF;">() </span><span style="color:#81A1C1;">*</span><span style="color:#B48EAD;"> 5</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">            cube</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">z</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">20</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">round</span><span style="color:#D8DEE9FF;">((</span><span style="color:#D8DEE9;">Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">random</span><span style="color:#D8DEE9FF;">() </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9;"> planeGeometry</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">parameters</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">height</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">            // add the cube to the scene</span></span>\n<span class="line"><span style="color:#D8DEE9;">            scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">cube</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">            this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">numberOfObjects</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> scene</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">children</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#ECEFF4;">        }</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">        this</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">outputObjects</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {</span></span>\n<span class="line"><span style="color:#D8DEE9;">            console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">scene</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">children</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#ECEFF4;">        }</span></span>\n<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#616E88;">    // dat.GUI 可视化改变代码变量</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> gui</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> dat</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">GUI</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    gui</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">controls</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">rotationSpeed</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0.5</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    gui</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">controls</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">addCube</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    gui</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">controls</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">removeCube</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    gui</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">controls</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">outputObjects</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">    gui</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">controls</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">numberOfObjects</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">listen</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">    // attach them here, since appendChild needs to be called first</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> trackballControls</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> initTrackballControls</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">camera</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> renderer</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> clock</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Clock</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#88C0D0;">    render</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9FF;">    </span></span>\n<span class="line"><span style="color:#81A1C1;">    function</span><span style="color:#88C0D0;"> render</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D8DEE9;">        trackballControls</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">update</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">clock</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getDelta</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">        stats</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">update</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">        // rotate the cubes around its axes</span></span>\n<span class="line"><span style="color:#D8DEE9;">        scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">traverse</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>\n<span class="line"><span style="color:#81A1C1;">            if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#81A1C1;"> instanceof</span><span style="color:#D8DEE9FF;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">Mesh </span><span style="color:#81A1C1;">&amp;&amp;</span><span style="color:#D8DEE9;"> e</span><span style="color:#81A1C1;"> !=</span><span style="color:#D8DEE9;"> plane</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>\n<span class="line"><span style="color:#D8DEE9;">                e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">rotation</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">x</span><span style="color:#81A1C1;"> +=</span><span style="color:#D8DEE9;"> controls</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">rotationSpeed</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">                e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">rotation</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">y</span><span style="color:#81A1C1;"> +=</span><span style="color:#D8DEE9;"> controls</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">rotationSpeed</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">                e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">rotation</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">z</span><span style="color:#81A1C1;"> +=</span><span style="color:#D8DEE9;"> controls</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">rotationSpeed</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#ECEFF4;">            }</span></span>\n<span class="line"><span style="color:#ECEFF4;">        }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#616E88;">        // render using requestAnimationFrame</span></span>\n<span class="line"><span style="color:#88C0D0;">        requestAnimationFrame</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">render</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">        renderer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">render</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">scene</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> camera</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#ECEFF4;">    }</span></span>\n<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="scene" tabindex="-1"><a class="header-anchor" href="#scene"><span>scene</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> scene</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Scene</span><span style="color:#D8DEE9FF;">()</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> cubeGeometry</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">BoxGeometry</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">4</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 4</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 4</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> cubeMaterial</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">MeshLambertMaterial</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> color</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 0xff0000</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> cube</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> THREE</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Mesh</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">cubeGeometry</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> cubeMaterial</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>\n<span class="line"><span style="color:#D8DEE9;">cube</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">castShadow</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> true;</span></span>\n<span class="line"><span style="color:#D8DEE9;">cube</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">position</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">( </span><span style="color:#81A1C1;">-</span><span style="color:#B48EAD;">4</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0</span><span style="color:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="color:#D8DEE9;">cube</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">cube</span><span style="color:#ECEFF4;">&quot;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D8DEE9;">scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">cube</span><span style="color:#D8DEE9FF;">) </span><span style="color:#616E88;">// 添加物体</span></span>\n<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> c</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getObjectByName</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">cube</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#616E88;">// 使用 name 获取物体</span></span>\n<span class="line"><span style="color:#D8DEE9;">scene</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">remove</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">c</span><span style="color:#D8DEE9FF;">) </span><span style="color:#616E88;">// 移除物体</span></span>\n<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> children</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> scene</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">children</span><span style="color:#616E88;"> // scene 中所有物体</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>traverse()</code>方法：参数<code>function</code>，递归遍历<code>scene</code>树，执行所传递的<code>function</code>参数。</p><p>scene对象属性：</p><ul><li>children</li><li>fog：雾化</li><li>overrideMaterial</li></ul><p>scene对象方法：</p><ul><li>add()：向 scene 中添加对象</li><li>remove()：移除 scene 中的对象</li><li>getObjectByName()：通过<code>name</code>属性获取 scene 中对象</li></ul>',14),e={},c=(0,a(8538).A)(e,[["render",function(s,n){return(0,l.uX)(),(0,l.CE)("div",null,[p,(0,l.Q3)(" more "),o])}]]),t=JSON.parse('{"path":"/threejs/threejs.html","title":"three.js学习笔记","lang":"zh-CN","frontmatter":{"title":"three.js学习笔记","icon":"link","category":"threejs","tag":["threejs","javascript","webGL"],"isOriginal":true,"timeline":true,"date":"2023-05-23T00:00:00.000Z","article":false,"description":"three.js学习笔记。","head":[["meta",{"property":"og:url","content":"https://hanekawa.top/threejs/threejs.html"}],["meta",{"property":"og:site_name","content":"hanekawa-shiki"}],["meta",{"property":"og:title","content":"three.js学习笔记"}],["meta",{"property":"og:description","content":"three.js学习笔记。"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-05T02:27:52.000Z"}],["meta",{"property":"article:author","content":"hanekawa-shiki"}],["meta",{"property":"article:tag","content":"threejs"}],["meta",{"property":"article:tag","content":"javascript"}],["meta",{"property":"article:tag","content":"webGL"}],["meta",{"property":"article:published_time","content":"2023-05-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-05T02:27:52.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"three.js学习笔记\\",\\"description\\":\\"three.js学习笔记。\\"}"]]},"headers":[{"level":2,"title":"核心概念","slug":"核心概念","link":"#核心概念","children":[{"level":3,"title":"scene","slug":"scene","link":"#scene","children":[]}]}],"git":{"createdTime":1684827738000,"updatedTime":1688524072000,"contributors":[{"name":"shiki ryougi","email":"shikiryougi@shikideMacBook.local","commits":4}]},"readingTime":{"minutes":2.44,"words":731},"filePathRelative":"threejs/threejs.md","localizedDate":"2023年5月23日","excerpt":"<p><code>three.js</code>学习笔记。</p>\\n","autoDesc":true}')},8538:(s,n)=>{n.A=(s,n)=>{const a=s.__vccOpts||s;for(const[s,l]of n)a[s]=l;return a}}}]);